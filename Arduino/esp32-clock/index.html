<!doctype html>
<html>
  <head>
    <script
      src="https://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous"></script>

    <style>
      td { border: 1px solid black; text-align: center; }

      td.checked {
        background: #9f9;
      }

      input {
        display: none;
      }

      .short { height: 22px; }
      .tall  { height: 64px; }

      .thin { width: 22px; }
      .wide { width: 64px; }

      table {
        display: block;
        float: left;
        width: 108px;
      }

      #code {
        display: block;
        float: left;
        background: #eee;
        padding: 8px;
        margin: 16px 0 0 32px;
      }
    </style>
  </head>
<body>
  <table id='one'>
    <tr class='short'>
      <td class='thin'>
      </td>
      <td class='wide'>
        <input type='checkbox' value='1' />
      </td>
      <td>
      </td>
    </tr>
    <tr class='tall'>
      <td class='thin'>
        <input type='checkbox' value='32' />
      </td>
      <td class='wide'>
      </td>
      <td class='thin'>
        <input type='checkbox' value='2' />
      </td>
    </tr>
    <tr class='short'>
      <td>
      </td>
      <td>
        <input type='checkbox' value='64' />
      </td>
      <td>
      </td>
    </tr>
    <tr class='tall'>
      <td>
        <input type='checkbox' value='16' />
      </td>
      <td class='wide'>
      </td>
      <td>
        <input type='checkbox' value='4' />
      </td>
    </tr>
    <tr class='short'>
      <td>
      </td>
      <td class='wide'>
        <input type='checkbox' value='8' />
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td colspan='3' class='result'>0</td>
    </tr>
  </table>
  <table id='two'>
    <tr class='short'>
      <td class='thin'>
      </td>
      <td class='wide'>
        <input type='checkbox' value='1' />
      </td>
      <td>
      </td>
    </tr>
    <tr class='tall'>
      <td class='thin'>
        <input type='checkbox' value='32' />
      </td>
      <td class='wide'>
      </td>
      <td class='thin'>
        <input type='checkbox' value='2' />
      </td>
    </tr>
    <tr class='short'>
      <td>
      </td>
      <td>
        <input type='checkbox' value='64' />
      </td>
      <td>
      </td>
    </tr>
    <tr class='tall'>
      <td>
        <input type='checkbox' value='16' />
      </td>
      <td class='wide'>
      </td>
      <td>
        <input type='checkbox' value='4' />
      </td>
    </tr>
    <tr class='short'>
      <td>
      </td>
      <td class='wide'>
        <input type='checkbox' value='8' />
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td colspan='3' class='result'>0</td>
    </tr>
  </table>
  <table id='three'>
    <tr class='short'>
      <td class='thin'>
      </td>
      <td class='wide'>
        <input type='checkbox' value='1' />
      </td>
      <td>
      </td>
    </tr>
    <tr class='tall'>
      <td class='thin'>
        <input type='checkbox' value='32' />
      </td>
      <td class='wide'>
      </td>
      <td class='thin'>
        <input type='checkbox' value='2' />
      </td>
    </tr>
    <tr class='short'>
      <td>
      </td>
      <td>
        <input type='checkbox' value='64' />
      </td>
      <td>
      </td>
    </tr>
    <tr class='tall'>
      <td>
        <input type='checkbox' value='16' />
      </td>
      <td class='wide'>
      </td>
      <td>
        <input type='checkbox' value='4' />
      </td>
    </tr>
    <tr class='short'>
      <td>
      </td>
      <td class='wide'>
        <input type='checkbox' value='8' />
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td colspan='3' class='result'>0</td>
    </tr>
  </table>
  <table id='four'>
    <tr class='short'>
      <td class='thin'>
      </td>
      <td class='wide'>
        <input type='checkbox' value='1' />
      </td>
      <td>
      </td>
    </tr>
    <tr class='tall'>
      <td class='thin'>
        <input type='checkbox' value='32' />
      </td>
      <td class='wide'>
      </td>
      <td class='thin'>
        <input type='checkbox' value='2' />
      </td>
    </tr>
    <tr class='short'>
      <td>
      </td>
      <td>
        <input type='checkbox' value='64' />
      </td>
      <td>
      </td>
    </tr>
    <tr class='tall'>
      <td>
        <input type='checkbox' value='16' />
      </td>
      <td class='wide'>
      </td>
      <td>
        <input type='checkbox' value='4' />
      </td>
    </tr>
    <tr class='short'>
      <td>
      </td>
      <td class='wide'>
        <input type='checkbox' value='8' />
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td colspan='3' class='result'>0</td>
    </tr>
  </table>

  <pre><code id='code'>matrix.writeDigitRaw(0, 0);
matrix.writeDigitRaw(1, 0);
matrix.writeDigitRaw(3, 0);
matrix.writeDigitRaw(4, 0);
matrix.writeDisplay();</code></pre>

<script>
$(function () {

  var totals = {
    one: 0,
    two: 0,
    three: 0,
    four: 0
  }

  var tables = ['one', 'two', 'three', 'four'];

  var codeText = "matrix.writeDigitRaw(0, one);\nmatrix.writeDigitRaw(1, two);\nmatrix.writeDigitRaw(3, three);\nmatrix.writeDigitRaw(4, four);\nmatrix.writeDisplay();"

  tables.forEach(function (table) {
    var tableID = '#' + table
    $('input[type=checkbox]', tableID).on('change', function (evt) {
      totals[table] = 0;

      console.log('this event', evt);

      if ($(this).is(':checked')) {
        $(this).parent().addClass('checked')
      } else {
        $(this).parent().removeClass('checked')
      }

      $('input[type=checkbox]', tableID).each(function () {
        if ($(this).is(':checked')) {
          console.log('cb', this.value);
          totals[table] += parseInt(this.value);
        }
      })

      // update totals
      $('.result', tableID).html(totals[table])

      // update code
      var newcode = codeText;
      tables.forEach(function (t) {
        newcode = newcode.replace(t, totals[t]);
      })
      $('#code').html(newcode)
    })
  })


  $('td').on('click', function () {
    $('input', this).click();
  })
})
</script>
</body>
</html>

